#---------------------------------------------------------------------------#
# Copyright (c) 2018-2020 Mikhail Komarov <nemo@nil.foundation>
#
# Distributed under the Boost Software License, Version 1.0
# See accompanying file LICENSE_1_0.txt or copy at
# http://www.boost.org/LICENSE_1_0.txt
#---------------------------------------------------------------------------#

import testing ;
import modules ;
import path ;
import ../../config/checks/config : requires ;

path-constant here : . ;

project : requirements
   <include>../include
   <include>../../..
   <toolset>msvc:<runtime-link>static
   <toolset>msvc:<link>static
   <toolset>msvc:<warnings>all
   <toolset>msvc:<cxxflags>/fp\:precise
   <toolset>intel-win:<runtime-link>static
   <toolset>intel-win:<link>static
   <toolset>clang-win:<link>static  # Clang-win does not generate .dlls.
   <toolset>clang:<link>static # Clang-linux does not generate .dlls.
   <toolset>clang:<cxxflags>-Wno-unused-variable  # warning: unused variable 'tolerance' [-Wunused-variable]
   <toolset>clang:<cxxflags>-v
;

test-suite block_tests :

   [ run block/kasumi.cpp ]
   [ run block/md4.cpp ]
   [ run block/md5.cpp ]
   [ run block/pack.cpp ]
   [ run block/rijndael.cpp ]
   [ run block/shacal.cpp ]
   [ run block/shacal2.cpp ]
;

test-suite codec_tests :

   [ run codec/base.cpp ]
   [ run codec/hex.cpp ]
;

test-suite hash_tests :

   [ run hash/blake2b.cpp ]
   [ run hash/keccak.cpp ]
   [ run hash/md4.cpp ]
   [ run hash/md5.cpp ]
   [ run hash/pack.cpp ]
   [ run hash/ripemd.cpp ]
   [ run hash/sha.cpp ]
   [ run hash/sha1.cpp ]
   [ run hash/sha2.cpp ]
   [ run hash/sha3.cpp ]
   [ run hash/static_digest.cpp ]
   [ run hash/tiger.cpp ]
;